FROM rockylinux:8
MAINTAINER Taro L. Saito <leo@xerial.org>

# Install development tools and dependencies for multi-architecture builds
RUN dnf -y update && \
    dnf -y install make gcc gcc-c++ glibc-devel perl wget bzip2 curl git cmake && \
    dnf clean all

# Install a modern GCC that supports cross-compilation and ARM optimizations
RUN dnf -y install gcc-toolset-11-gcc gcc-toolset-11-gcc-c++ && \
    dnf clean all

# Enable the modern GCC toolset by default
ENV PATH=/opt/rh/gcc-toolset-11/root/usr/bin:$PATH
ENV LD_LIBRARY_PATH=/opt/rh/gcc-toolset-11/root/usr/lib64:/opt/rh/gcc-toolset-11/root/usr/lib:$LD_LIBRARY_PATH

WORKDIR /work